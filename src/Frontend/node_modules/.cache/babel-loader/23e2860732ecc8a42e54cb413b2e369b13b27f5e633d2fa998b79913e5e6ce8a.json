{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ergas/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/ergas/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/Frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/ergas/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/ergas/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ergas/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef,useEffect}from'react';import\"./Card.scss\";import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import Data from'../../Utils/Data';import ReactLoading from'react-loading';import{useDispatch,useSelector}from'react-redux';import{getFoodsFromLocalStorage}from'../../Redux/UserFood';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Card=function Card(props,_ref){var type=_ref.type,color=_ref.color,className=_ref.className;var switcher=useSelector(function(state){return state.Foods.foodArray;});var dispatch=useDispatch();var notify=function notify(){return toast.success('In addition, would you like more?');};var _useState=useState([]),_useState2=_slicedToArray(_useState,2),foods=_useState2[0],setFoods=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),animation=_useState4[0],setAnimation=_useState4[1];function run(){return _run.apply(this,arguments);}function _run(){_run=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return Data.GetCategoriy();case 2:response=_context.sent;if(response!==undefined){if(props.categoriyId!==undefined||props.categoriyId!==null||props.categoriyId!==0){setFoods(response[(props===null||props===void 0?void 0:props.categoriyId)-1].food);}}else{setFoods(\"\");}case 4:case\"end\":return _context.stop();}},_callee);}));return _run.apply(this,arguments);}console.log(props);useEffect(function(){run();},[props.categoriyId]);useEffect(function(){var delay=1000;var interval;if((foods===null||foods===void 0?void 0:foods.length)>0||foods!==undefined){interval=setTimeout(function(){setAnimation(false);},delay);}return function(){setAnimation(true);clearInterval(interval);};},[foods]);var filterFoods=foods.filter(function(i){return i.name.toLowerCase().includes(props.search.toLowerCase());});console.log(filterFoods);function pushFoodArray(index){var existingObject=switcher.find(function(obj){return obj.id===index.id;});if(existingObject){var updatedObjects=switcher.map(function(obj){if(obj.id===index.id){return _objectSpread(_objectSpread({},obj),{},{count:obj.count+1});}return obj;});localStorage.setItem('FoodsArray',JSON.stringify(updatedObjects));dispatch(getFoodsFromLocalStorage());}else{var newFoodsArray=[].concat(_toConsumableArray(switcher),[_objectSpread(_objectSpread({},index),{},{count:1})]);localStorage.setItem('FoodsArray',JSON.stringify(newFoodsArray));dispatch(getFoodsFromLocalStorage());}}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ToastContainer,{position:\"top-center\",autoClose:2000,hideProgressBar:false,newestOnTop:false,closeOnClick:true,rtl:false,pauseOnFocusLoss:false,draggable:true,pauseOnHover:false,theme:\"dark\",className:\"notificaton\"}),animation?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{id:\"loader-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{})})}):/*#__PURE__*/_jsx(\"div\",{className:\"card-row\",children:(filterFoods===null||filterFoods===void 0?void 0:filterFoods.length)>0?foods===null||foods===void 0?void 0:foods.map(function(iteam,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"food-card\",children:[/*#__PURE__*/_jsx(\"div\",{style:{backgroundImage:\"url(\".concat(iteam.imageUrl,\")\")},className:\"card-img\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-title\",children:[/*#__PURE__*/_jsx(\"h5\",{children:iteam.name}),/*#__PURE__*/_jsx(\"p\",{children:\"$ 2.29\"}),/*#__PURE__*/_jsxs(\"p\",{children:[iteam.count,\" Bowls available\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-buy\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){notify();pushFoodArray(iteam);},children:\"Add\"})})]});}):/*#__PURE__*/_jsx(\"div\",{id:\"load\",children:\"\\u041D\\u0435\\u0442 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u043E\\u0432\"})})]});};export default Card;","map":{"version":3,"names":["React","useState","useRef","useEffect","ToastContainer","toast","Data","ReactLoading","useDispatch","useSelector","getFoodsFromLocalStorage","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Card","props","_ref","type","color","className","switcher","state","Foods","foodArray","dispatch","notify","success","_useState","_useState2","_slicedToArray","foods","setFoods","_useState3","_useState4","animation","setAnimation","run","_run","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","GetCategoriy","sent","undefined","categoriyId","food","stop","console","log","delay","interval","length","setTimeout","clearInterval","filterFoods","filter","i","name","toLowerCase","includes","search","pushFoodArray","index","existingObject","find","obj","id","updatedObjects","map","_objectSpread","count","localStorage","setItem","JSON","stringify","newFoodsArray","concat","_toConsumableArray","children","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","theme","iteam","style","backgroundImage","imageUrl","onClick"],"sources":["C:/Users/ergas/OneDrive/Рабочий стол/Frontend/src/Components/Home/Card.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport \"./Card.scss\"\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport Data from '../../Utils/Data';\r\nimport ReactLoading from 'react-loading';\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { getFoodsFromLocalStorage } from '../../Redux/UserFood';\r\nconst Card = (props, { type, color, className }) => {\r\n    const switcher = useSelector(state => state.Foods.foodArray)\r\n    const dispatch = useDispatch()\r\n    const notify = () => toast.success('In addition, would you like more?');\r\n    const [foods, setFoods] = useState([])\r\n    const [animation, setAnimation] = useState(true)\r\n    async function run() {\r\n        let response = await Data.GetCategoriy()\r\n        if (response !== undefined) {\r\n            if (props.categoriyId !== undefined || props.categoriyId !== null || props.categoriyId !== 0) {\r\n                setFoods(response[props?.categoriyId - 1].food)\r\n            }\r\n        }\r\n        else {\r\n            setFoods(\"\")\r\n        }\r\n    }\r\n    console.log(props);\r\n    useEffect(() => {\r\n        run()\r\n    }, [props.categoriyId])\r\n    useEffect(() => {\r\n        const delay = 1000;\r\n        var interval;\r\n        if (foods?.length > 0 || foods !== undefined) {\r\n            interval = setTimeout(() => {\r\n                setAnimation(false)\r\n            }, delay)\r\n        }\r\n\r\n        return () => {\r\n            setAnimation(true)\r\n            clearInterval(interval)\r\n        }\r\n    }, [foods])\r\n    const filterFoods = foods.filter(i => {\r\n        return i.name.toLowerCase().includes(props.search.toLowerCase())\r\n    })\r\n    console.log(filterFoods);\r\n    function pushFoodArray(index) {\r\n        const existingObject = switcher.find(obj => obj.id === index.id);\r\n\r\n        if (existingObject) {\r\n            const updatedObjects = switcher.map(obj => {\r\n                if (obj.id === index.id) {\r\n                    return { ...obj, count: obj.count + 1 };\r\n                }\r\n                return obj;\r\n            });\r\n            localStorage.setItem('FoodsArray', JSON.stringify(updatedObjects))\r\n            dispatch(getFoodsFromLocalStorage())\r\n\r\n        } else {\r\n            const newFoodsArray = [...switcher, { ...index, count: 1 }]\r\n            localStorage.setItem('FoodsArray', JSON.stringify(newFoodsArray))\r\n            dispatch(getFoodsFromLocalStorage())\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <ToastContainer\r\n                position=\"top-center\"\r\n                autoClose={2000}\r\n                hideProgressBar={false}\r\n                newestOnTop={false}\r\n                closeOnClick\r\n                rtl={false}\r\n                pauseOnFocusLoss={false}\r\n                draggable\r\n                pauseOnHover={false}\r\n                theme=\"dark\"\r\n                className=\"notificaton\" />\r\n            {animation ? <>\r\n                <div id=\"loader-wrapper\">\r\n                    <div></div>\r\n                </div>\r\n            </>\r\n                : <div className='card-row'>\r\n                    {filterFoods?.length > 0 ? foods?.map((iteam, index) => {\r\n                        return (\r\n                            <div className='food-card'>\r\n                                <div style={{ backgroundImage: `url(${iteam.imageUrl})` }} className='card-img'>\r\n                                </div>\r\n                                <div className='card-title'>\r\n                                    <h5>{iteam.name}</h5>\r\n                                    <p>$ 2.29</p>\r\n                                    <p>{iteam.count} Bowls available</p>\r\n                                </div>\r\n                                <div className='card-buy'>\r\n                                    <button onClick={() => { notify(); pushFoodArray(iteam) }}>Add</button>\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                    }) : <div id=\"load\">\r\n                         Нет продуктов\r\n                    </div>}\r\n                </div>}\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Card;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}